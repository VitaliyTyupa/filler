<section class="start-page">
  <mat-card class="start-card">
    <header class="start-page__header">
      <h1>Start Game</h1>
      <p>Configure your match settings to begin.</p>
    </header>

    <form class="start-form" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <p class="form-label">Mode</p>
        <mat-radio-group class="mode-options" formControlName="mode">
          @for (mode of modes; track mode) {
            <mat-radio-button class="mode-option" [value]="mode">{{ modeLabels[mode] }}</mat-radio-button>
          }
        </mat-radio-group>
      </div>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Board size</mat-label>
        <mat-select formControlName="boardPreset">
          @for (preset of boardPresets; track preset.label) {
            <mat-option [value]="preset">{{ preset.label }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Palette size</mat-label>
        <mat-select formControlName="paletteSize">
          @for (size of paletteSizes; track size) {
            <mat-option [value]="size">{{ size }} colors</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Player 1 name</mat-label>
        <input matInput id="player1Name" type="text" formControlName="player1Name" placeholder="Enter your name" />
        @if (player1Control.invalid && (player1Control.dirty || player1Control.touched)) {
          @if (player1Control.hasError('required')) {
            <mat-error>Обов'язкове поле</mat-error>
          } @else if (player1Control.hasError('minlength')) {
            <mat-error>Мінімум 2 символи</mat-error>
          }
        }
      </mat-form-field>

      @if (isLocalMode) {
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Player 2 name</mat-label>
          <input
            matInput
            id="player2Name"
            type="text"
            formControlName="player2Name"
            placeholder="Enter second player name"
          />
          @if (player2Control.invalid && (player2Control.dirty || player2Control.touched)) {
            @if (player2Control.hasError('required')) {
              <mat-error>Обов'язкове поле</mat-error>
            } @else if (player2Control.hasError('minlength')) {
              <mat-error>Мінімум 2 символи</mat-error>
            }
          }
        </mat-form-field>
      }

      <div class="actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">Почати гру</button>
      </div>
    </form>
  </mat-card>

  <mat-card class="start-card rules-card">
    <h2>Як грати</h2>
    <ul class="rules-list">
      <li>Гравець 1 починає у верхньому лівому куті, гравець 2 — у нижньому правому.</li>
      <li>У свій хід оберіть колір із палітри, щоб розширити територію.</li>
      <li>Захоплюються усі суміжні клітинки, що мають вибраний колір і межують із вашою зоною.</li>
      <li>Не можна вибирати колір, який зараз у суперника, або свій власний.</li>
      <li>Гравці ходять по черзі, доки всі клітини не будуть зайняті.</li>
      <li>Перемагає той, хто контролює більшу кількість клітин.</li>
    </ul>
  </mat-card>
</section>
